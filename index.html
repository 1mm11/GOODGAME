window.playGame = (url) => {
    // Перевірка, чи посилання починається з http
    if (!url.startsWith('http')) {
        alert("Помилка: Посилання на гру має починатися з http:// або https://");
        return;
    }

    // Створюємо вікно плеєра
    const overlay = document.createElement('div');
    overlay.id = "game-overlay";
    overlay.className = "fixed inset-0 bg-black z-[1000] flex flex-col";
    overlay.innerHTML = `
        <div class="p-4 bg-gray-900 flex justify-between items-center border-b border-gray-700">
            <div class="flex items-center gap-3">
                <span class="text-green-500 font-bold text-xs">GAMESTORE PLAYER</span>
                <a href="${url}" target="_blank" class="text-[10px] bg-gray-700 px-2 py-1 rounded text-white">Відкрити в новій вкладці ↗</a>
            </div>
            <button onclick="document.getElementById('game-overlay').remove()" class="bg-red-600 text-white px-4 py-1 rounded-full text-xs font-bold">ЗАКРИТИ [X]</button>
        </div>
        <div class="relative flex-grow bg-black">
            <iframe 
                src="${url}" 
                class="absolute inset-0 w-full h-full border-none" 
                allow="autoplay; fullscreen; keyboard; gamepad" 
                sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-presentation allow-scripts allow-same-origin">
            </iframe>
        </div>
    `;
    document.body.appendChild(overlay);
};
